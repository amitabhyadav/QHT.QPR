"""Runs the classical Hough transform."""
import numpy as np
import matplotlib.pyplot as plt
from SimpleDetector import SimpleDetector
from ClassicalHough import ConformalMapping, ShowConformalMap
from ClassicalHough import HoughLine, ShowHoughAccumulator


def main():
    sd = SimpleDetector()
    hits_x = [
        5, 20, 45, 80, 125, 180, 245, 320, 405, 500, -0.714, -2.857, -6.429,
        -11.429, -17.857, -25.714, -35, -45.714, -57.857, -71.429, -7.143,
        -28.571, -64.286, -114.286, -178.571, -257.143, -350, -457.143,
        -578.571, -714.286, 0.714, 2.857, 6.429, 11.429, 17.857, 25.714, 35,
        45.714, 57.857, 71.429
    ]
    hits_y = [
        99.875, 198.997, 296.606, 391.918, 484.123, 572.364, 655.725, 733.212,
        803.726, 866.025, 99.997, 199.980, 299.931, 399.837, 499.681, 599.449,
        699.124, 798.693, 898.138, 997.446, 99.745, 197.949, 293.031, 383.329,
        467.025, 542.105, 606.218, 656.521, 689.387, 699.854, -99.997,
        -199.980, -299.931, -399.837, -499.681, -599.449, -699.124, -798.693,
        -898.138, -997.446
    ]
    hits_x = [
        5, 20, 45, 80, 125, 180, 245, 320, 405, 500, -0.714, -2.857, -6.429,
        -11.429, -17.857, -25.714, -35, -45.714, -57.857, -71.429, -7.143,
        -28.571, -64.286, -114.286, -178.571, -257.143, -350, -457.143,
        -578.571, -714.286
    ]
    hits_y = [
        99.875, 198.997, 296.606, 391.918, 484.123, 572.364, 655.725, 733.212,
        803.726, 866.025, 99.997, 199.980, 299.931, 399.837, 499.681, 599.449,
        699.124, 798.693, 898.138, 997.446, 99.745, 197.949, 293.031, 383.329,
        467.025, 542.105, 606.218, 656.521, 689.387, 699.854
    ]
    hits_x = [
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 100, 200, 300, 400, 500, 600, 700, 800,
        900, 1000, -100, -200, -300, -400, -500, -600, -700, -800, -900, -1000
    ]
    hits_y = [
        100, 200, 300, 400, 500, 600, 700, 800, 900, 1000, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
    ]
    # hits_x = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    # hits_y = [100, 200, 300, 400, 500, 600, 700, 800, 900, 1000]

    sd.set_hits(hits_x, hits_y)
    sd.plot_detector_hits()

    accumulator, thetas, rhos = HoughLine(hits_x, hits_y)
    # print(accumulator)
    ShowHoughAccumulator(hits_x,
                         hits_y,
                         accumulator,
                         thetas,
                         rhos,
                         save_path=None)


if __name__ == '__main__':
    main()